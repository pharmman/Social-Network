(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[0],{11:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return c}));var r=n(126),a=n.n(r).a.create({withCredentials:!0,headers:{"API-KEY":"ea1464d3-6693-4a83-9755-2421f1dd088c"},baseURL:"https://social-network.samuraijs.com/api/1.0/"}),i={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return a.get("users?count=".concat(t,"&page=").concat(e)).then((function(e){return e.data}))}},o={follow:function(e){return a.post("follow/".concat(e)).then((function(e){return e.data}))},unFollow:function(e){return a.delete("follow/".concat(e)).then((function(e){return e.data}))}},u={getProfile:function(e){return a.get("profile/".concat(e)).then((function(e){return e.data}))},getProfileStatus:function(e){return a.get("profile/status/".concat(e)).then((function(e){return e.data}))},updateProfileStatus:function(e){return a.put("profile/status",{status:e}).then((function(e){return e.data}))}},c={authMe:function(){return a.get("/auth/me").then((function(e){return e.data}))},login:function(e,t,n){return a.post("auth/login",{email:e,password:t,rememberMe:n}).then((function(e){return e.data}))},logOut:function(){return a.delete("auth/login").then((function(e){return e.data}))}}},122:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return u}));var r=n(30),a=n(8),i={textForNewMessage:"",dialogs:[{id:1,name:"Steve"},{id:2,name:"Tim"},{id:3,name:"Jhonny"},{id:4,name:"Andy"},{id:5,name:"Sasha"}],messages:[{id:1,message:"Hello"},{id:2,message:"How is your day?"},{id:3,message:"Introduce Iphone"},{id:4,message:"Introduce Ipad"},{id:5,message:"Google suck"}]},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DIALOGS/ADD-NEW-MESSAGE":return Object(a.a)({},e,{messages:[].concat(Object(r.a)(e.messages),[{id:6,message:t.value}]),textForNewMessage:""});default:return e}},u=function(e){return{type:"DIALOGS/ADD-NEW-MESSAGE",value:e}}},125:function(e,t,n){"use strict";n.d(t,"f",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return E})),n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return O})),n.d(t,"e",(function(){return S}));var r=n(9),a=n.n(r),i=n(16),o=n(30),u=n(8),c=n(11);function s(e,t){var n=JSON.stringify(t);localStorage.setItem(e,n)}var l={users:[],totalUsersCount:0,currentPage:1,pageSize:10,isFetching:!1,followingInProgress:[]},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS/FOLLOW":return Object(u.a)({},e,{users:e.users.map((function(e){return e.id===t.id?Object(u.a)({},e,{followed:!0}):e}))});case"USERS/UNFOLLOW":return Object(u.a)({},e,{users:e.users.map((function(e){return e.id===t.id?Object(u.a)({},e,{followed:!1}):e}))});case"USERS/SET-USERS":return Object(u.a)({},e,{users:Object(o.a)(t.users)});case"USERS/SET-CURRENT-PAGE":return s("currentUsersPage",t.page),Object(u.a)({},e,{currentPage:t.page});case"USERS/SET-TOTAL-USERS-COUNT":return Object(u.a)({},e,{totalUsersCount:t.count});case"USERS/CHANGE-FETCHING-STATUS":return Object(u.a)({},e,{isFetching:t.fetching});case"USERS/TOGGLE-FOLLOWING-PROGRESS":return Object(u.a)({},e,{followingInProgress:t.followingProgress?[].concat(Object(o.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},d=function(e){return{type:"USERS/FOLLOW",id:e}},m=function(e){return{type:"USERS/UNFOLLOW",id:e}},p=function(e){return{type:"USERS/SET-CURRENT-PAGE",page:e}},E=function(e){return{type:"USERS/SET-TOTAL-USERS-COUNT",count:e}},g=function(e){return{type:"USERS/CHANGE-FETCHING-STATUS",fetching:e}},v=function(e,t){return{type:"USERS/TOGGLE-FOLLOWING-PROGRESS",followingProgress:e,userId:t}},h=function(e,t){return function(){var n=Object(i.a)(a.a.mark((function n(r){var i;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(g(!0)),n.next=3,c.d.getUsers(e,t);case 3:i=n.sent,r(p(e)),r(g(!1)),r(E(+i.totalCount)),r({type:"USERS/SET-USERS",users:i.items});case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},b=function(){var e=Object(i.a)(a.a.mark((function e(t,n,r,i){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(v(!0,r)),e.next=3,n(r);case 3:0===e.sent.resultCode&&t(i(r)),t(v(!1,r));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),O=function(e){return function(){var t=Object(i.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b(n,c.b.follow.bind(c.b),e,d);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=function(e){return function(){var t=Object(i.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b(n,c.b.unFollow.bind(c.b),e,m);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},129:function(e,t,n){e.exports={lds_grid:"Preloader_lds_grid__lJrG2","lds-grid":"Preloader_lds-grid__32jtE"}},14:function(e,t,n){e.exports={navbar:"Navbar_navbar__1wkao",navbar__item:"Navbar_navbar__item__1_xvB",active:"Navbar_active__1wtfh"}},156:function(e,t,n){e.exports=n(281)},161:function(e,t,n){},281:function(e,t,n){"use strict";n.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r=n(0),a=n.n(r),i=n(60),o=n.n(i),u=n(18),c=n(47),s=n(48),l=n(58),f=n(59),d=(n(161),n(14)),m=n.n(d);function p(){return a.a.createElement("nav",{className:m.a.navbar},a.a.createElement("div",{className:m.a.navbar__item},a.a.createElement(u.b,{to:"/profile",activeClassName:m.a.active},"Profile")),a.a.createElement("div",{className:m.a.navbar__item},a.a.createElement(u.b,{to:"/dialogs",activeClassName:m.a.active},"Messages")),a.a.createElement("div",{className:m.a.navbar__item},a.a.createElement("a",{href:"/dialogs"},"News")),a.a.createElement("div",{className:m.a.navbar__item},a.a.createElement("a",{href:"/dialogs"},"Music")),a.a.createElement("div",{className:m.a.navbar__item},a.a.createElement("a",{href:"/dialogs"},"Settings")),a.a.createElement("div",{className:m.a.navbar__item},a.a.createElement(u.b,{to:"/users",activeClassName:m.a.active},"Users")),a.a.createElement("div",{className:m.a.navbar__item},a.a.createElement(u.b,{to:"/login",activeClassName:m.a.active},"Login")))}var E=n(7),g=n(65),v=n.n(g);function h(e){return a.a.createElement("header",{className:v.a.header},a.a.createElement("img",{className:v.a.header__logo,src:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/The_social_network.svg/1280px-The_social_network.svg.png",alt:"logo"}),a.a.createElement("div",{className:v.a.login},e.isAuth?a.a.createElement("div",null,e.login," - ",a.a.createElement("button",{onClick:function(){e.logOutTC()}},"LogOut")," "):a.a.createElement(u.b,{to:"/login"},"Login")))}var b=n(9),O=n.n(b),S=n(16),_=n(8),w=n(11),T=n(36),j={id:null,email:null,login:null,isAuth:!1},N=function(e,t,n,r){return{type:"AUTH/SET-AUTH-DATA",payload:{id:e,email:t,login:n,isAuth:r}}},y=function(){return function(){var e=Object(S.a)(O.a.mark((function e(t){var n,r,a,i,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.authMe();case 2:0===(n=e.sent).resultCode&&(r=n.data,a=r.id,i=r.email,o=r.login,t(N(a,i,o,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=function(){return function(){var e=Object(S.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.logOut();case 2:0===e.sent.resultCode&&t(N(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},A=n(15),I=function(e){Object(f.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(h,this.props))}}]),n}(a.a.Component),U=Object(A.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logOutTC:P})(I),R=n(123),C=n(29),L=n(61),k=n(43),F=n.n(k),x=Object(L.a)(30),G=Object(R.a)({form:"login"})((function(e){return a.a.createElement("form",{onSubmit:e.handleSubmit},Object(C.c)("Email","email",C.a,"email",[x,L.b]),Object(C.c)("Password","password",C.a,"password",[x,L.b]),Object(C.c)(null,"RememberMe",C.a,"checkbox",[]," Remember me"),a.a.createElement("div",null,a.a.createElement("button",null,"Login")),e.error&&a.a.createElement("div",{className:F.a.commonError},e.error))})),D=Object(A.b)((function(e){return{isAuth:e.auth.isAuth}}),{loginTC:function(e,t,n){return function(){var r=Object(S.a)(O.a.mark((function r(a){var i,o;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,w.a.login(e,t,n);case 2:0===(i=r.sent).resultCode?a(y()):(o=i.messages.length>0?i.messages[0]:"Email or password incorrect",a(Object(T.a)("login",{_error:o})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},logOutTC:P})((function(e){return e.isAuth?a.a.createElement(E.a,{to:"/Profile"}):a.a.createElement(G,{onSubmit:function(t){e.loginTC(t.email,t.password,t.rememberMe)}})})),H={initialization:!1},M=n(57),z=n(6);function W(e){return function(t){return a.a.createElement(a.a.Suspense,{fallback:a.a.createElement(M.a,null)},a.a.createElement(e,t))}}var J=a.a.lazy((function(){return n.e(4).then(n.bind(null,292))})),Y=a.a.lazy((function(){return n.e(3).then(n.bind(null,293))})),B=a.a.lazy((function(){return n.e(5).then(n.bind(null,291))})),Z=function(e){Object(f.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialization?a.a.createElement("div",{className:"app-wrapper"},a.a.createElement(U,null),a.a.createElement("div",{className:"app-inner"},a.a.createElement(p,null),a.a.createElement("div",{className:"app-inner-content"},a.a.createElement(E.b,{path:"/dialogs",render:W(Y)}),a.a.createElement(E.b,{path:"/profile/:userId?",render:W(B)}),a.a.createElement(E.b,{path:"/users",render:W(J)}),a.a.createElement(E.b,{path:"/login",render:function(){return a.a.createElement(D,null)}})))):a.a.createElement(M.a,null)}}]),n}(a.a.Component),X=Object(z.d)(E.f,Object(A.b)((function(e){return{initialization:e.app.initialization}}),{getAuthUserData:y,initializeApp:function(){return function(e){e(y()).then((function(){e({type:"APP/SET-INITIALIZATION"})}))}}}))(Z),q=n(90),K=n(122),V=n(125),$=n(130),Q=n(124),ee=Object(z.c)({profilePage:q.d,dialogsPage:K.b,usersPage:V.f,auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH/SET-AUTH-DATA":return Object(_.a)({},e,{},t.payload);default:return e}},form:Q.a,app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/SET-INITIALIZATION":return Object(_.a)({},e,{initialization:!0});default:return e}}}),te=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||z.d,ne=Object(z.e)(ee,te(Object(z.a)($.a)));window.store=ne,o.a.render(a.a.createElement(u.a,null,a.a.createElement(A.a,{store:ne},a.a.createElement(X,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},29:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return d}));var r=n(64),a=n(83),i=n(0),o=n.n(i),u=n(43),c=n.n(u),s=function(e){e.input;var t=e.meta,n=(Object(r.a)(e,["input","meta"]),t.touched&&t.error);return o.a.createElement("div",null,o.a.createElement("div",{className:n?c.a.error:""},e.children),o.a.createElement("div",null,n&&o.a.createElement("span",{className:c.a.errorSpan},t.error)))},l=function(e){var t=e.input,n=e.meta,a=Object(r.a)(e,["input","meta"]);return o.a.createElement(s,{input:t,meta:n},o.a.createElement("textarea",Object.assign({},t,a)))},f=function(e){var t=e.input,n=e.meta,a=Object(r.a)(e,["input","meta"]);return o.a.createElement(s,{input:t,meta:n},o.a.createElement("input",Object.assign({},t,a)))},d=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return o.a.createElement("div",null,o.a.createElement(a.a,{type:r,validate:i,placeholder:e,name:t,component:n}),o.a.createElement("span",null,u))}},43:function(e,t,n){e.exports={error:"FormControls_error__SafJ6",errorSpan:"FormControls_errorSpan__2gy5U",commonError:"FormControls_commonError__dMkCY"}},57:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(0),a=n.n(r),i=n(129),o=n.n(i),u=function(){return a.a.createElement("div",{className:o.a.lds_grid},a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null))}},61:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=function(e){return e?void 0:"Required field"},a=function(e){return function(t){return t&&t.length>e?"Must be ".concat(e," characters or less"):void 0}}},65:function(e,t,n){e.exports={header:"Header_header__2DdZm",header__logo:"Header_header__logo__2tHb1",login:"Header_login__2DU_B"}},90:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return p})),n.d(t,"e",(function(){return E}));var r=n(9),a=n.n(r),i=n(16),o=n(30),u=n(8),c=n(11),s={profile:null,messageForNewPost:"",status:"",posts:[{id:1,message:"Hi, how are you?",likesCount:12},{id:2,message:"It's my first post",likesCount:12},{id:3,message:"Yo Yo Yo",likesCount:12},{id:4,message:"It's revolution Jhonny!",likesCount:100500}]},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PROFILE/ADD-POST":return Object(u.a)({},e,{posts:[].concat(Object(o.a)(e.posts),[{id:5,message:t.value,likesCount:0}])});case"PROFILE/SET-PROFILE":return Object(u.a)({},e,{profile:t.profile});case"PROFILE/SET-PROFILE-STATUS":return Object(u.a)({},e,{status:t.status});case"PROFILE/DELETE-POST":return Object(u.a)({},e,{posts:e.posts.filter((function(e){return e.id!==t.id}))});default:return e}},f=function(e){return{type:"PROFILE/ADD-POST",value:e}},d=function(e){return{type:"PROFILE/SET-PROFILE-STATUS",status:e}},m=function(e){return function(t){c.c.getProfile(e).then((function(e){t({type:"PROFILE/SET-PROFILE",profile:e})}))}},p=function(e){return function(){var t=Object(i.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.c.getProfileStatus(e);case 2:r=t.sent,n(d(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(i.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.c.updateProfileStatus(e);case 2:0===t.sent.resultCode&&n(d(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}},[[156,1,2]]]);
//# sourceMappingURL=main.b4abba9a.chunk.js.map