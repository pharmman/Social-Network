{"version":3,"sources":["api/api.ts","components/Header/Header.module.scss","redux/dialogs-reducer.tsx","localStorage/localStorage.ts","redux/users-reducer.tsx","components/Navbar/Navbar.module.scss","assets/images/logo.png","components/common/Preloader/Preloader.module.css","components/common/ConstructionPage/ConstructionPage.module.scss","components/common/formContorols/FormControls.tsx","serviceWorker.ts","components/Navbar/Link/Link.tsx","components/Navbar/Navbar.tsx","components/Header/Header.tsx","redux/auth-reducer.tsx","components/Header/HeaderContainer.tsx","components/Login/Login.tsx","redux/app-reducer.tsx","hoc/ComponentWithSuspense.tsx","components/common/ConstructionPage/ConstructionPage.tsx","components/News/News.tsx","components/Settings/Settings.tsx","components/Music/Music.tsx","App.tsx","redux/store.ts","index.tsx","components/common/formContorols/FormControls.module.css","components/common/Preloader/Preloader.tsx","redux/profile-reducer.tsx","validators/validators.ts","components/Navbar/Link/Link.module.scss"],"names":["instance","axios","create","withCredentials","headers","baseURL","usersAPI","getUsers","currentPage","pageSize","get","then","response","data","followAPI","follow","id","post","unFollow","delete","profileAPI","getProfile","userId","getProfileStatus","updateProfileStatus","status","put","updateProfilePhoto","photo","FormData","append","updateProfile","profile","authAPI","authMe","login","email","password","rememberMe","captcha","logOut","getCaptchaUrl","module","exports","initialState","textForNewMessage","dialogs","name","messages","message","dialogsReducer","state","action","type","value","addNewMessageActionCreator","saveState","key","stateAsString","JSON","stringify","localStorage","setItem","users","totalUsersCount","isFetching","followingInProgress","usersReducer","map","u","followed","page","count","fetching","followingProgress","filter","followAC","unFollowAC","userID","setCurrentPage","setTotalUsersCount","changeFetchingStatus","toggleFollowingProgress","requestUsers","dispatch","a","totalCount","items","followUnfollowFlow","apiMethod","actionCreator","resultCode","bind","FormControl","props","meta","hasError","touched","error","className","styles","children","errorSpan","Textarea","input","restProps","Input","createField","placeholder","component","validators","text","validate","Boolean","window","location","hostname","match","Link","linkName","link","icon","to","activeClassName","activeLink","size","Navbar","classes","navbar","faIdCard","faEnvelope","faNewspaper","faMusic","faCog","faUsers","faSignInAlt","Header","logOutTC","useState","menuIsShowing","setShowMenu","header","leftSide","burgerMenu","onClick","faBars","headerLogoContainer","headerLogo","src","logo","alt","rightSide","isAuth","loginMenu","loginButton","faSignOutAlt","onClickAway","profileImgContainer","profileImg","profilePhoto","profileMenuShow","profileMenuHidden","profileMenuAvatar","authorizedUserId","profileMenuImg","profileUserName","userName","captchaUrl","setAuthData","payload","getAuthUserData","url","HeaderContainer","this","getUserProfile","React","Component","connect","auth","profilePage","photos","small","fullName","maxLength30","maxLength","LoginFormReduxForm","reduxForm","form","shouldValidate","params","console","log","onSubmit","handleSubmit","required","commonError","loginTC","length","stopSubmit","_error","formData","initialization","withSuspense","WrappedComponent","Suspense","fallback","Preloader","ConstructionPage","News","Settings","Music","UsersContainer","lazy","DialogsContainer","ProfileContainer","App","initializeApp","exact","path","render","compose","withRouter","app","reducers","combineReducers","profileReducer","dialogsPage","usersPage","formReducer","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","createStore","applyMiddleware","thunk","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","lds_grid","messageForNewPost","posts","likesCount","p","setProfileStatusAC","file","getState","toString","Promise","reject","undefined","max"],"mappings":"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","file":"static/js/main.8e36b444.chunk.js","sourcesContent":["import axios from 'axios';\r\nimport {UserType} from '../redux/users-reducer';\r\nimport {ProfileType} from '../redux/profile-reducer';\r\n\r\ntype GetUsersResponseType = {\r\n    items: UserType[]\r\n    totalCount: string\r\n    error: string | null\r\n}\r\n\r\nexport type ResponseType<T = {}> = {\r\n    resultCode: number\r\n    messages: string[]\r\n    data: T\r\n}\r\n\r\ntype ProfileResponseType = {\r\n    aboutMe: string\r\n    contacts: {\r\n        facebook: string\r\n        website: string\r\n        vk: string\r\n        twitter: string\r\n        instagram: string\r\n        youtube: string\r\n        github: string\r\n        mainLink: string\r\n    }\r\n    lookingForAJob: boolean\r\n    lookingForAJobDescription: string\r\n    fullName: string\r\n    userId: number\r\n    photos: {\r\n        small: string\r\n        large: string\r\n    }\r\n}\r\n\r\ntype AuthMeResponseType<T = {\r\n    id: number\r\n    email: string\r\n    login: string\r\n}> = {\r\n    data: T\r\n    resultCode: number\r\n    messages: Array<string>\r\n}\r\n\r\nconst instance = axios.create({\r\n    withCredentials: true,\r\n    headers: {\r\n        'API-KEY': 'ea1464d3-6693-4a83-9755-2421f1dd088c'\r\n    },\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n})\r\n\r\nexport const usersAPI = {\r\n    getUsers(currentPage: number = 1, pageSize: number = 10) {\r\n        return instance.get<GetUsersResponseType>(`users?count=${pageSize}&page=${currentPage}`)\r\n            .then(response => {\r\n                return response.data\r\n            })\r\n    }\r\n}\r\n\r\nexport const followAPI = {\r\n    follow(id: number) {\r\n        return instance.post<ResponseType>(`follow/${id}`)\r\n            .then(response => {\r\n                return response.data\r\n            })\r\n    },\r\n    unFollow(id: number) {\r\n        return instance.delete<ResponseType>(`follow/${id}`)\r\n            .then(response => {\r\n                return response.data\r\n            })\r\n    }\r\n}\r\n\r\nexport const profileAPI = {\r\n    getProfile(userId: string | number) {\r\n        return instance.get<ProfileResponseType>(`profile/${userId}`)\r\n            .then(response => {\r\n                return response.data\r\n            })\r\n    },\r\n    getProfileStatus(userId: string) {\r\n        return instance.get<string>(`profile/status/${userId}`)\r\n            .then(response => {\r\n                return response.data\r\n            })\r\n    },\r\n    updateProfileStatus(status: string) {\r\n        return instance.put<ResponseType>('profile/status', {status})\r\n            .then(response => {\r\n                return response.data\r\n            })\r\n    },\r\n    updateProfilePhoto(photo: File) {\r\n        let data = new FormData();\r\n        data.append('photo', photo);\r\n        return instance.put<ResponseType<{ photos: { small: string, large: string } }>>('profile/photo', data, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        })\r\n            .then(response => {\r\n                return response.data\r\n            })\r\n    },\r\n    updateProfile(profile:ProfileType) {\r\n        return instance.put<ResponseType>('profile', {...profile})\r\n            .then(response => {\r\n                return response.data\r\n            })\r\n    }\r\n}\r\n\r\nexport const authAPI = {\r\n    authMe() {\r\n        return instance.get<AuthMeResponseType>('/auth/me')\r\n            .then(response => {\r\n                return response.data\r\n            })\r\n    },\r\n    login(email: string, password: string, rememberMe: boolean, captcha:string) {\r\n        return instance.post<AuthMeResponseType<{ userId: number }>>('auth/login', {\r\n            email,\r\n            password,\r\n            rememberMe,\r\n            captcha\r\n        })\r\n            .then(response => {\r\n                return response.data\r\n            })\r\n    },\r\n    logOut() {\r\n        return instance.delete<AuthMeResponseType<Object>>('auth/login',)\r\n            .then(response => {\r\n                return response.data\r\n            })\r\n    },\r\n    getCaptchaUrl() {\r\n        return instance.get<{url:string}>('security/get-captcha-url')\r\n            .then(response => {\r\n                return response.data\r\n            })\r\n    }\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__36jKL\",\"leftSide\":\"Header_leftSide__2kPZ1\",\"burgerMenu\":\"Header_burgerMenu__edcLE\",\"headerLogoContainer\":\"Header_headerLogoContainer__2vtn0\",\"rightSide\":\"Header_rightSide__3meJM\",\"loginMenu\":\"Header_loginMenu__1CEA7\",\"profileImgContainer\":\"Header_profileImgContainer__3LtCf\",\"profileImg\":\"Header_profileImg__2fNSy\",\"profileMenuHidden\":\"Header_profileMenuHidden__13oSg\",\"profileMenuShow\":\"Header_profileMenuShow__28P6m\",\"profileMenuAvatar\":\"Header_profileMenuAvatar__3hzc5\",\"profileMenuImg\":\"Header_profileMenuImg__24kBE\",\"profileUserName\":\"Header_profileUserName__lS7fG\",\"loginButton\":\"Header_loginButton__1QYbi\"};","\r\nexport type DialogsReducerActionsType = ReturnType<typeof addNewMessageActionCreator>\r\n\r\nconst initialState = {\r\n    textForNewMessage: '',\r\n    dialogs: [\r\n        {id: 1, name: 'Steve'},\r\n        {id: 2, name: 'Tim'},\r\n        {id: 3, name: 'Jhonny'},\r\n        {id: 4, name: 'Andy'},\r\n        {id: 5, name: 'Sasha'},\r\n    ],\r\n    messages: [\r\n        {id: 1, message: 'Hello'},\r\n        {id: 2, message: 'How is your day?'},\r\n        {id: 3, message: 'Introduce Iphone'},\r\n        {id: 4, message: 'Introduce Ipad'},\r\n        {id: 5, message: 'Google suck'},\r\n    ]\r\n}\r\n\r\ntype DialogsStateType = typeof initialState\r\n\r\nexport const dialogsReducer = (state = initialState, action: DialogsReducerActionsType):DialogsStateType => {\r\n    switch (action.type) {\r\n        case 'DIALOGS/ADD-NEW-MESSAGE':\r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, {id: 6, message: action.value}],\r\n                textForNewMessage: ''\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const addNewMessageActionCreator = (value: string) => ({type: 'DIALOGS/ADD-NEW-MESSAGE', value} as const)","export function saveState<T>(key: string, state: T) {\r\n    const stateAsString = JSON.stringify(state);\r\n    localStorage.setItem(key, stateAsString)\r\n}\r\n\r\nexport function restoreState<T>(key: string, defaultState: T) {\r\n    const stateAsString = localStorage.getItem(key);\r\n    if (stateAsString !== null) defaultState = JSON.parse(stateAsString) as T;\r\n    return defaultState;\r\n}\r\n","import {followAPI, ResponseType, usersAPI} from '../api/api';\r\nimport {saveState} from '../localStorage/localStorage';\r\nimport {Dispatch} from 'redux';\r\nimport {ActionsType, ThunkType} from \"./store\";\r\n\r\nexport type UsersPageType = {\r\n    users: Array<UserType>\r\n    pageSize: number\r\n    totalUsersCount: number\r\n    currentPage: number\r\n    isFetching: boolean\r\n    followingInProgress: number[]\r\n}\r\nexport type UserType = {\r\n    id: number\r\n    name: string\r\n    status: string | null\r\n    photos: {\r\n        small: string | null\r\n        large: string | null\r\n    }\r\n    followed: boolean\r\n}\r\nexport type UsersReducerActionsType =\r\n    ReturnType<typeof followAC>\r\n    | ReturnType<typeof unFollowAC>\r\n    | ReturnType<typeof setUsers>\r\n    | ReturnType<typeof setCurrentPage>\r\n    | ReturnType<typeof setTotalUsersCount>\r\n    | ReturnType<typeof changeFetchingStatus>\r\n    | ReturnType<typeof toggleFollowingProgress>\r\n\r\nconst initialState: UsersPageType = {\r\n    users: [],\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    pageSize: 10,\r\n    isFetching: false,\r\n    followingInProgress: []\r\n}\r\n\r\nexport const usersReducer = (state = initialState, action: UsersReducerActionsType): UsersPageType => {\r\n    switch (action.type) {\r\n        case 'USERS/FOLLOW':\r\n            return {\r\n                ...state,\r\n                users: state.users.map((u) => u.id === action.id ? {...u, followed: true} : u)\r\n            }\r\n        case 'USERS/UNFOLLOW':\r\n            return {\r\n                ...state,\r\n                users: state.users.map((u) => u.id === action.id ? {...u, followed: false} : u)\r\n            }\r\n        case 'USERS/SET-USERS':\r\n            return {\r\n                ...state,\r\n                users: [...action.users]\r\n            }\r\n        case 'USERS/SET-CURRENT-PAGE':\r\n            saveState('currentUsersPage', action.page)\r\n            return {\r\n                ...state,\r\n                currentPage: action.page\r\n            }\r\n        case 'USERS/SET-TOTAL-USERS-COUNT':\r\n            return {\r\n                ...state,\r\n                totalUsersCount: action.count\r\n            }\r\n        case 'USERS/CHANGE-FETCHING-STATUS':\r\n            return {\r\n                ...state,\r\n                isFetching: action.fetching\r\n            }\r\n        case 'USERS/TOGGLE-FOLLOWING-PROGRESS':\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.followingProgress ?\r\n                    [...state.followingInProgress, action.userId]\r\n                    :\r\n                    state.followingInProgress.filter(id => id !== action.userId)\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const followAC = (userId: number) => ({type: 'USERS/FOLLOW',id: userId} as const)\r\nexport const unFollowAC = (userID: number) => ({type: 'USERS/UNFOLLOW',id: userID} as const)\r\nexport const setUsers = (users: Array<UserType>) => ({type: 'USERS/SET-USERS',users} as const)\r\nexport const setCurrentPage = (page: number) => ({type: 'USERS/SET-CURRENT-PAGE',page} as const)\r\nexport const setTotalUsersCount = (count: number) => ({type: 'USERS/SET-TOTAL-USERS-COUNT',count} as const)\r\nexport const changeFetchingStatus = (fetching: boolean) => ({type: 'USERS/CHANGE-FETCHING-STATUS',fetching} as const)\r\nexport const toggleFollowingProgress = (followingProgress: boolean, userId: number) =>\r\n    ({type: 'USERS/TOGGLE-FOLLOWING-PROGRESS',followingProgress,userId} as const)\r\n\r\n//thunks\r\nexport const requestUsers = (currentPage: number, pageSize: number): ThunkType => async (dispatch) => {\r\n    dispatch(changeFetchingStatus(true))\r\n    const data = await usersAPI.getUsers(currentPage, pageSize)\r\n    dispatch(setCurrentPage(currentPage))\r\n    dispatch(setTotalUsersCount(+data.totalCount))\r\n    dispatch(setUsers(data.items))\r\n    dispatch(changeFetchingStatus(false))\r\n}\r\n\r\nconst followUnfollowFlow = async (\r\n    dispatch: Dispatch, apiMethod: (id: number) => Promise<ResponseType>, id: number, actionCreator: (id: number) => ActionsType) => {\r\n    dispatch(toggleFollowingProgress(true, id))\r\n    const data = await apiMethod(id)\r\n    if (data.resultCode === 0) {\r\n        dispatch(actionCreator(id))\r\n    }\r\n    dispatch(toggleFollowingProgress(false, id))\r\n}\r\n\r\nexport const follow = (id: number): ThunkType => async (dispatch) => {\r\n    await followUnfollowFlow(dispatch, followAPI.follow.bind(followAPI), id, followAC)\r\n}\r\n\r\nexport const unFollow = (id: number): ThunkType => async (dispatch) => {\r\n    await followUnfollowFlow(dispatch, followAPI.unFollow.bind(followAPI), id, unFollowAC)\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navbar\":\"Navbar_navbar__F898k\"};","module.exports = \"data:image/png;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"lds_grid\":\"Preloader_lds_grid__lJrG2\",\"lds-grid\":\"Preloader_lds-grid__32jtE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"text\":\"ConstructionPage_text__3To9Z\"};","import {Field, WrappedFieldProps} from 'redux-form';\r\nimport React, {FC} from 'react';\r\nimport styles from './FormControls.module.css'\r\n\r\nexport const FormControl: React.FC<WrappedFieldProps> = (props) => {\r\n    const {meta} = props\r\n    const hasError = meta.touched && meta.error\r\n\r\n    return (\r\n        <>\r\n            <div className={hasError ? styles.error : ''}>\r\n                {props.children}\r\n            </div>\r\n            <div>\r\n                {hasError && <span className={styles.errorSpan}>{meta.error}</span>}\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport const Textarea: React.FC<WrappedFieldProps> = (props) => {\r\n    const {input, meta, ...restProps} = props\r\n\r\n    return <FormControl input={input} meta={meta}><textarea {...input} {...restProps}/></FormControl>\r\n}\r\n\r\nexport const Input: React.FC<WrappedFieldProps> = (props) => {\r\n    const {input, meta, ...restProps} = props\r\n\r\n    return <FormControl input={input} meta={meta}><input {...input} {...restProps}/></FormControl>\r\n}\r\n\r\nexport const createField = (placeholder: string | null, name: string, component: FC<WrappedFieldProps>, type: string ,validators: any = [], text = '') => {\r\n    return <>\r\n        <Field type={type} validate={validators} placeholder={placeholder} name={name} component={component}/>\r\n        <span>{text}</span>\r\n    </>\r\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import styles from './Link.module.scss';\r\nimport {NavLink} from 'react-router-dom';\r\nimport React from 'react';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome'\r\nimport {IconProp} from '@fortawesome/fontawesome-svg-core';\r\n\r\n\r\ntype LinkPropsType = {\r\n    linkName: string\r\n    link: string\r\n    icon: IconProp\r\n}\r\n\r\nexport const Link: React.FC<LinkPropsType> = ({linkName, link, icon}) => {\r\n    return (\r\n        <li className={styles.link}>\r\n            <NavLink to={link} activeClassName={styles.activeLink}>\r\n                <FontAwesomeIcon icon={icon} size={'lg'}/>\r\n                <span>{linkName}</span>\r\n            </NavLink>\r\n        </li>\r\n    )\r\n}","import React from 'react';\r\nimport classes from './Navbar.module.scss'\r\nimport {Link} from './Link/Link';\r\nimport {\r\n    faCog,\r\n    faEnvelope,\r\n    faIdCard,\r\n    faMusic,\r\n    faNewspaper,\r\n    faSignInAlt,\r\n    faUsers\r\n} from '@fortawesome/free-solid-svg-icons';\r\n\r\n\r\nexport function Navbar() {\r\n    return (\r\n        <nav className={classes.navbar}>\r\n            <ul>\r\n                <Link linkName={'Profile'} link={'/profile'} icon={faIdCard}/>\r\n                <Link linkName={'Messages'} link={'/dialogs'} icon={faEnvelope}/>\r\n                <Link linkName={'News'} link={'/news'} icon={faNewspaper}/>\r\n                <Link linkName={'Music'} link={'/music'} icon={faMusic}/>\r\n                <Link linkName={'Settings'} link={'/settings'} icon={faCog}/>\r\n                <Link linkName={'Users'} link={'/users'} icon={faUsers}/>\r\n                <Link linkName={'Login'} link={'/login'} icon={faSignInAlt}/>\r\n            </ul>\r\n        </nav>\r\n    )\r\n}","import React, {useState} from 'react';\r\nimport styles from './Header.module.scss'\r\nimport {HeaderContainerPropsType} from './HeaderContainer';\r\nimport {NavLink} from 'react-router-dom';\r\nimport logo from '../../assets/images/logo.png'\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome'\r\nimport {faBars, faSignInAlt, faSignOutAlt} from '@fortawesome/free-solid-svg-icons'\r\nimport ClickAwayListener from 'react-click-away-listener';\r\n\r\ntype HeaderPropsType = HeaderContainerPropsType\r\n\r\nexport function Header(props: HeaderPropsType) {\r\n    const logOut = () => {\r\n        props.logOutTC()\r\n    }\r\n\r\n    const [menuIsShowing, setShowMenu] = useState(false)\r\n\r\n    const menuHandler = () => {\r\n        setShowMenu(!menuIsShowing)\r\n    }\r\n\r\n    const handleClickAway = () => {\r\n        if (menuIsShowing) {\r\n            setShowMenu(false)\r\n        }\r\n    };\r\n\r\n    return (\r\n        <header className={styles.header}>\r\n            <div className={styles.leftSide}>\r\n                <div className={styles.burgerMenu}><FontAwesomeIcon onClick={logOut} icon={faBars} size={'lg'}/></div>\r\n                <div className={styles.headerLogoContainer}>\r\n                    <NavLink to={'/'}><img className={styles.headerLogo}\r\n                                           src={logo}\r\n                                           alt=\"logo\"/></NavLink>\r\n                </div>\r\n            </div>\r\n            <div className={styles.rightSide}>\r\n\r\n                {props.isAuth\r\n                    ?\r\n                    <div className={styles.loginMenu}>\r\n                        <div className={styles.loginButton}>\r\n                            <FontAwesomeIcon onClick={logOut} icon={faSignOutAlt} size={'lg'}/>\r\n                        </div>\r\n                        <ClickAwayListener onClickAway={handleClickAway}>\r\n                            <div className={styles.profileImgContainer}>\r\n                                <img onClick={menuHandler} className={styles.profileImg} src={props.profilePhoto}\r\n                                     alt={'Profile'}/>\r\n\r\n                                <div className={menuIsShowing ? styles.profileMenuShow : styles.profileMenuHidden}>\r\n                                    <div className={styles.profileMenuAvatar}>\r\n                                        <NavLink to={`/profile/:${props.authorizedUserId}?`}>\r\n                                            <img className={styles.profileMenuImg} src={props.profilePhoto}\r\n                                                 alt={'Profile'}/>\r\n                                        </NavLink>\r\n                                    </div>\r\n                                    <div className={styles.profileUserName}>\r\n                                        {props.userName}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </ClickAwayListener>\r\n                    </div>\r\n                    :\r\n                    <div className={styles.loginButton}>\r\n                        <NavLink to={'/login'}><FontAwesomeIcon icon={faSignInAlt} size={'lg'}/></NavLink>\r\n                    </div>\r\n                }\r\n            </div>\r\n        </header>\r\n\r\n    )\r\n}","import {authAPI} from '../api/api';\r\nimport {stopSubmit} from 'redux-form';\r\nimport {Dispatch} from 'redux';\r\nimport {ThunkType} from \"./store\";\r\n\r\nexport type AuthDataType = {\r\n    id: number | null\r\n    email: string | null\r\n    login: string | null\r\n    isAuth: boolean,\r\n    captchaUrl: string\r\n}\r\nexport type AuthReducerActionsType = ReturnType<typeof setAuthData> | ReturnType<typeof setCaptchaUrl>\r\n\r\n\r\nconst initialState: AuthDataType = {\r\n    id: null,\r\n    email: null,\r\n    login: null,\r\n    isAuth: false,\r\n    captchaUrl: ''\r\n}\r\n\r\nexport const authReducer = (state = initialState, action: AuthReducerActionsType): AuthDataType => {\r\n    switch (action.type) {\r\n        case 'AUTH/SET-AUTH-DATA':\r\n        case 'AUTH/SET-CAPTCHA-URL':\r\n            return {\r\n                ...state,\r\n                ...action.payload,\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const setAuthData = (id: number | null, email: string | null, login: string | null, isAuth: boolean) =>\r\n    ({type: 'AUTH/SET-AUTH-DATA', payload: {id, email, login, isAuth}} as const)\r\nconst setCaptchaUrl = (captchaUrl: string) => ({type: 'AUTH/SET-CAPTCHA-URL', payload: {captchaUrl}} as const)\r\n\r\n//thunks\r\nexport const getAuthUserData = () => async (dispatch: Dispatch) => {\r\n    const data = await authAPI.authMe()\r\n    if (data.resultCode === 0) {\r\n        const {id, email, login} = data.data\r\n        dispatch(setAuthData(id, email, login, true))\r\n    }\r\n}\r\n\r\nexport const loginTC = (email: string, password: string, rememberMe: boolean, captcha: string): ThunkType =>\r\n    async (dispatch) => {\r\n        const response = await authAPI.login(email, password, rememberMe, captcha)\r\n        if (response.resultCode === 0) {\r\n            dispatch(getAuthUserData())\r\n        } else {\r\n            if (response.resultCode === 10) {\r\n                const message = response.messages.length > 0 ? response.messages[0] : 'Email or password incorrect'\r\n                dispatch(stopSubmit('login', {_error: message}))\r\n                dispatch(getCaptchaUrl())\r\n            } else {\r\n                const message = response.messages.length > 0 ? response.messages[0] : 'Email or password incorrect'\r\n                dispatch(stopSubmit('login', {_error: message}))\r\n            }\r\n        }\r\n    }\r\n\r\nexport const logOutTC = (): ThunkType => async (dispatch) => {\r\n    const response = await authAPI.logOut()\r\n    if (response.resultCode === 0) {\r\n        dispatch(setAuthData(null, null, null, false))\r\n    }\r\n}\r\n\r\nexport const getCaptchaUrl = (): ThunkType => async (dispatch) => {\r\n    const response = await authAPI.getCaptchaUrl()\r\n    dispatch(setCaptchaUrl(response.url))\r\n}","import React from 'react';\r\nimport {Header} from './Header';\r\nimport {StateType} from '../../redux/store';\r\nimport {logOutTC} from '../../redux/auth-reducer';\r\nimport {connect} from 'react-redux';\r\nimport {getUserProfile} from '../../redux/profile-reducer';\r\n\r\n//types\r\ntype MapStateToPropsType = ReturnType<typeof mapStateToProps>\r\ntype MapDispatchToPropsType = {\r\n    logOutTC: () => void\r\n    getUserProfile: (userId: string | number) => void\r\n}\r\n\r\nexport type HeaderContainerPropsType = MapStateToPropsType & MapDispatchToPropsType\r\n\r\nclass HeaderContainer extends React.Component<HeaderContainerPropsType, StateType> {\r\n\r\n    componentDidMount() {\r\n        if (this.props.isAuth) {\r\n            if (this.props.authorizedUserId) {\r\n                this.props.getUserProfile(this.props.authorizedUserId)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <Header {...this.props}/>\r\n            </>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = (state: StateType) => {\r\n    return {\r\n        isAuth: state.auth.isAuth,\r\n        login: state.auth.login,\r\n        authorizedUserId: state.auth.id,\r\n        profilePhoto: state.profilePage.profile?.photos.small,\r\n        userName: state.profilePage.profile?.fullName\r\n    }\r\n}\r\n\r\nexport default connect<MapStateToPropsType, MapDispatchToPropsType, {}, StateType>(mapStateToProps,\r\n    {\r\n        logOutTC,\r\n        getUserProfile\r\n    }\r\n)(HeaderContainer)","import React from 'react';\r\nimport {InjectedFormProps, reduxForm, ValidateCallback} from 'redux-form';\r\nimport {createField, Input} from '../common/formContorols/FormControls';\r\nimport {maxLength, required} from '../../validators/validators';\r\nimport {connect} from 'react-redux';\r\nimport {loginTC, logOutTC} from '../../redux/auth-reducer';\r\nimport {StateType} from '../../redux/store';\r\nimport {Redirect} from 'react-router-dom';\r\nimport styles from './../common/formContorols/FormControls.module.css'\r\n\r\ntype FormDataType = {\r\n    email: string\r\n    password: string,\r\n    rememberMe: boolean,\r\n    captcha: string\r\n}\r\n\r\ntype MapStateToPropsType = {\r\n    isAuth: boolean\r\n    captchaUrl: string\r\n}\r\n\r\ntype MapDispatchToPropsType = {\r\n    loginTC: (email: string, password: string, rememberMe: boolean, captchaUrl: string) => void,\r\n    logOutTC: () => void\r\n}\r\n\r\ntype LoginPropsType = MapStateToPropsType & MapDispatchToPropsType\r\n\r\nconst mapStateToProps = (state: StateType) => {\r\n    return {\r\n        isAuth: state.auth.isAuth,\r\n        captchaUrl: state.auth.captchaUrl\r\n    }\r\n}\r\n\r\nconst Login = (props: LoginPropsType) => {\r\n\r\n    const login = (formData: FormDataType) => {\r\n        props.loginTC(formData.email, formData.password, formData.rememberMe, formData.captcha)\r\n    }\r\n    if (props.isAuth) {\r\n        return <Redirect to={'/Profile'}/>\r\n    }\r\n    return (\r\n        <LoginFormReduxForm onSubmit={login} captchaUrl={props.captchaUrl}/>\r\n    )\r\n}\r\n\r\nconst maxLength30 = maxLength(30)\r\n\r\nconst LoginForm: React.FC<InjectedFormProps<FormDataType, { captchaUrl: string }> & { captchaUrl: string }> = (props) => {\r\n    console.log(props.error)\r\n    return (\r\n        <form onSubmit={props.handleSubmit}>\r\n            {createField('Email', 'email', Input, 'email', [maxLength30, required])}\r\n            {createField('Password', 'password', Input, 'password', [maxLength30, required])}\r\n            {createField(null, 'RememberMe', Input, 'checkbox', [], ' Remember me')}\r\n            <div>{props.captchaUrl && <img src={props.captchaUrl} alt=\"captcha\"/>}</div>\r\n            <div>{props.captchaUrl && createField(\r\n                'Enter symbols form image', 'captcha', Input, 'text')}</div>\r\n            <div>\r\n                <button>Login</button>\r\n            </div>\r\n            <div>\r\n                {props.error && <div className={styles.commonError}>\r\n                    {props.error}\r\n                </div>\r\n                }\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst LoginFormReduxForm = reduxForm<FormDataType, { captchaUrl: string }>\r\n({\r\n    form: 'login', shouldValidate(params: ValidateCallback<FormDataType, { captchaUrl: string }, string>): any {\r\n    }\r\n})(LoginForm)\r\n\r\nexport default connect<MapStateToPropsType, MapDispatchToPropsType, {}, StateType>(mapStateToProps, {\r\n    loginTC,\r\n    logOutTC\r\n})(Login)\r\n\r\n","import {getAuthUserData} from './auth-reducer';\r\nimport {ThunkType} from \"./store\";\r\n\r\ntype AppDataType = typeof initialState\r\nexport type AppReducerActionsType = SetInitializationType\r\ntype SetInitializationType = ReturnType<typeof setInitialization>\r\n\r\nconst initialState = {\r\n    initialization: false,\r\n}\r\n\r\nexport const appReducer = (state = initialState, action: AppReducerActionsType): AppDataType => {\r\n    switch (action.type) {\r\n        case 'APP/SET-INITIALIZATION':\r\n            return {\r\n                ...state,\r\n                initialization: true\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nconst setInitialization = () => ({type: 'APP/SET-INITIALIZATION'} as const)\r\nexport const initializeApp = ():ThunkType => (dispatch) => {\r\n    dispatch(getAuthUserData()).then(() => {\r\n        dispatch(setInitialization())\r\n    })\r\n}","import React from 'react';\r\nimport {Preloader} from '../components/common/Preloader/Preloader';\r\n\r\n\r\nexport function withSuspense(WrappedComponent: any) {\r\n\r\n    return (props:any) => {\r\n        return <React.Suspense fallback={<Preloader/>}><WrappedComponent {...props}/></React.Suspense>\r\n    }\r\n}\r\n\r\n","import React from 'react';\r\nimport styles from './ConstructionPage.module.scss'\r\n\r\n\r\nexport const ConstructionPage:React.FC = () => {\r\n    return (\r\n        <div>\r\n            <h2 className={styles.text}>Coming soon</h2>\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\nimport {ConstructionPage} from '../common/ConstructionPage/ConstructionPage';\r\n\r\nexport const News:React.FC = () => {\r\n    return (\r\n        <ConstructionPage/>\r\n    )\r\n}","import {ConstructionPage} from '../common/ConstructionPage/ConstructionPage';\r\nimport React from 'react';\r\n\r\n\r\nexport const Settings:React.FC = () => {\r\n    return (\r\n        <ConstructionPage/>\r\n    )\r\n}","import {ConstructionPage} from '../common/ConstructionPage/ConstructionPage';\r\nimport React from 'react';\r\n\r\n\r\nexport const Music:React.FC = () => {\r\n    return (\r\n        <ConstructionPage/>\r\n    )\r\n}","import React from 'react';\r\nimport './App.scss';\r\nimport {Navbar} from './components/Navbar/Navbar';\r\nimport {Redirect, Route, Switch, withRouter} from 'react-router-dom';\r\nimport HeaderContainer from './components/Header/HeaderContainer';\r\nimport Login from './components/Login/Login';\r\nimport {connect} from 'react-redux';\r\nimport {getAuthUserData} from './redux/auth-reducer';\r\nimport {StateType} from './redux/store';\r\nimport {initializeApp} from './redux/app-reducer';\r\nimport {Preloader} from './components/common/Preloader/Preloader';\r\nimport {compose} from 'redux';\r\nimport {withSuspense} from './hoc/ComponentWithSuspense';\r\nimport {News} from './components/News/News';\r\nimport {Settings} from './components/Settings/Settings';\r\nimport {Music} from './components/Music/Music';\r\n\r\nconst UsersContainer = React.lazy(() => import('./components/Users/UsersContainer'));\r\nconst DialogsContainer = React.lazy(() => import ('./components/Dialogs/DialogsContainer'));\r\nconst ProfileContainer = React.lazy(() => import ('./components/Profile/ProfileContainer'));\r\n\r\ntype MapStateToPropsType = {\r\n    initialization: boolean\r\n}\r\n\r\ntype MapDispatchToPropsType = {\r\n    getAuthUserData: () => void\r\n    initializeApp: () => void\r\n}\r\n\r\ntype AppPropsType = MapStateToPropsType & MapDispatchToPropsType\r\n\r\nexport const mapStateToProps = (state: StateType) => {\r\n    return {\r\n        initialization: state.app.initialization\r\n    }\r\n}\r\n\r\n\r\nclass App extends React.Component<AppPropsType, StateType> {\r\n\r\n    componentDidMount() {\r\n        this.props.initializeApp()\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.initialization) {\r\n            return <Preloader/>\r\n        }\r\n        return (\r\n            <div>\r\n                <HeaderContainer/>\r\n                <div className={'appWrapper'}>\r\n                <Navbar/>\r\n                    <div className={'appMain'}>\r\n                        <Switch>\r\n                            <Route exact path={'/'} render={() => <Redirect to={'/login'}/>}/>\r\n                            <Route exact path={'/Social-Network'} render={() => <Redirect to={'/login'}/>}/>\r\n                            <Route path={'/dialogs'} render={withSuspense(DialogsContainer)}/>\r\n                            <Route path={'/news'} render={() => <News/>}/>\r\n                            <Route path={'/settings'} render={() => <Settings/>}/>\r\n                            <Route path={'/music'} render={() => <Music/>}/>\r\n                            <Route path={'/profile/:userId?'}\r\n                                   render={withSuspense(ProfileContainer)}/>\r\n                            <Route path={'/users'}\r\n                                   render={withSuspense(UsersContainer)}/>\r\n                            <Route path={'/login'}\r\n                                   render={() => <Login/>}/>\r\n                            <Route path={'*'} render={() => <Redirect to={'/404'}/>}/>\r\n                            <Route path={'404'} render={() => <h1>Page not found</h1>}/>\r\n                        </Switch>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default compose<React.ComponentType>(withRouter, connect<MapStateToPropsType, MapDispatchToPropsType, {}, StateType>(mapStateToProps, {\r\n    getAuthUserData,\r\n    initializeApp\r\n}))(App);\r\n","import {applyMiddleware, combineReducers, compose, createStore, Store} from 'redux';\r\nimport {profileReducer, ProfileReducerActionsType} from './profile-reducer';\r\nimport {dialogsReducer, DialogsReducerActionsType} from './dialogs-reducer';\r\nimport {usersReducer, UsersReducerActionsType} from './users-reducer';\r\nimport {authReducer, AuthReducerActionsType} from './auth-reducer';\r\nimport thunk, {ThunkAction} from 'redux-thunk';\r\nimport {reducer as formReducer} from 'redux-form'\r\nimport {appReducer, AppReducerActionsType} from './app-reducer';\r\n\r\nexport type ActionsType =\r\n    ProfileReducerActionsType\r\n    | AppReducerActionsType\r\n    | AuthReducerActionsType\r\n    | DialogsReducerActionsType\r\n    | UsersReducerActionsType\r\nexport type ThunkType = ThunkAction<void, StateType, unknown, ActionsType>\r\nexport type StateType = ReturnType<typeof reducers>;\r\n\r\nconst reducers = combineReducers({\r\n    profilePage: profileReducer,\r\n    dialogsPage: dialogsReducer,\r\n    usersPage: usersReducer,\r\n    auth: authReducer,\r\n    form: formReducer,\r\n    app: appReducer\r\n} as const);\r\n\r\n//@ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nexport const store:Store = createStore(reducers, composeEnhancers(applyMiddleware(thunk)));\r\n\r\n// @ts-ignore\r\nwindow.store = store\r\n","import * as serviceWorker from './serviceWorker';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {BrowserRouter} from 'react-router-dom';\r\nimport App from './App';\r\nimport {store} from './redux/store';\r\nimport {Provider} from 'react-redux';\r\n\r\n\r\nReactDOM.render(\r\n        <BrowserRouter>\r\n            <Provider store={store}>\r\n            <App/>\r\n            </Provider>\r\n        </BrowserRouter>, document.getElementById('root')\r\n    );\r\n\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"FormControls_error__SafJ6\",\"errorSpan\":\"FormControls_errorSpan__2gy5U\",\"commonError\":\"FormControls_commonError__dMkCY\"};","import React from 'react';\r\nimport classes from './Preloader.module.css'\r\n\r\nexport const Preloader = () => {\r\n    return <div className={classes.lds_grid}>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n    </div>\r\n}","import {profileAPI} from '../api/api';\r\nimport {stopSubmit} from 'redux-form';\r\nimport {ThunkAction} from 'redux-thunk';\r\nimport {ActionsType, StateType, ThunkType} from './store';\r\n\r\nexport type ProfileType = {\r\n    aboutMe: string\r\n    contacts: ContactsType\r\n    lookingForAJob: boolean\r\n    lookingForAJobDescription: string\r\n    fullName: string\r\n    userId: number\r\n    photos: {\r\n        small: string\r\n        large: string\r\n    }\r\n}\r\nexport type ContactsType = {\r\n    facebook: string\r\n    website: string\r\n    vk: string\r\n    twitter: string\r\n    instagram: string\r\n    youtube: string\r\n    github: string\r\n    mainLink: string\r\n}\r\nexport type ProfileStateType = typeof initialState\r\nexport type ProfileReducerActionsType =\r\n    ReturnType<typeof setProfileStatusAC>\r\n    | ReturnType<typeof setUserProfileAC>\r\n    | ReturnType<typeof deletePostAC>\r\n    | ReturnType<typeof updatePhotoAC>\r\n    | ReturnType<typeof updateProfileAC>\r\n    | ReturnType<typeof addPostAC>\r\nexport type PostsDataType = {\r\n    id: number\r\n    message: string\r\n    likesCount: number\r\n}\r\n\r\nconst initialState = {\r\n    profile: null as ProfileType | null,\r\n    messageForNewPost: '',\r\n    status: '',\r\n    posts: [\r\n        {id: 1, message: 'Hi, how are you?', likesCount: 12},\r\n        {id: 2, message: 'It\\'s my first post', likesCount: 12},\r\n        {id: 3, message: 'Yo Yo Yo', likesCount: 12},\r\n        {id: 4, message: 'It\\'s revolution Jhonny!', likesCount: 100500}\r\n    ]\r\n}\r\n\r\nexport const profileReducer = (state = initialState, action: ProfileReducerActionsType): ProfileStateType => {\r\n    switch (action.type) {\r\n        case 'PROFILE/ADD-POST':\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, {id: 5, message: action.value, likesCount: 0}],\r\n            }\r\n        case 'PROFILE/SET-PROFILE':\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            }\r\n        case 'PROFILE/SET-PROFILE-STATUS':\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            }\r\n        case 'PROFILE/DELETE-POST':\r\n            return {...state, posts: state.posts.filter(p => p.id !== action.id)}\r\n        case 'PROFILE/UPDATE-PHOTO':\r\n            return {...state, profile: {...state.profile, photos: {...action.photos}} as ProfileType}\r\n        case 'PROFILE/UPDATE-PROFILE':\r\n            return {...state, profile: action.profile}\r\n        default :\r\n            return state\r\n    }\r\n}\r\n\r\n//ActionCreators\r\nexport const addPostAC = (value: string) => ({type: 'PROFILE/ADD-POST', value} as const);\r\nexport const setUserProfileAC = (profile: ProfileType) => ({type: 'PROFILE/SET-PROFILE', profile} as const)\r\nexport const setProfileStatusAC = (status: string) => ({type: 'PROFILE/SET-PROFILE-STATUS', status} as const)\r\nexport const deletePostAC = (id: number) => ({type: 'PROFILE/DELETE-POST', id} as const)\r\nexport const updatePhotoAC = (photos: { small: string, large: string }) => ({\r\n    type: 'PROFILE/UPDATE-PHOTO', photos} as const)\r\nexport const updateProfileAC = (profile: ProfileType) => ({type: 'PROFILE/UPDATE-PROFILE', profile} as const)\r\n\r\n//Thunks\r\nexport const getProfileStatus = (userId: string): ThunkType => async (dispatch) => {\r\n    const data = await profileAPI.getProfileStatus(userId)\r\n    dispatch(setProfileStatusAC(data))\r\n}\r\n\r\nexport const getUserProfile = (userId: string | number): ThunkType => (dispatch) => {\r\n    profileAPI.getProfile(userId)\r\n        .then(data => {\r\n            dispatch(setUserProfileAC(data))\r\n        })\r\n}\r\n\r\nexport const updateProfileStatus = (status: string): ThunkType => async (dispatch) => {\r\n    const data = await profileAPI.updateProfileStatus(status)\r\n    if (data.resultCode === 0) {\r\n        dispatch(setProfileStatusAC(status))\r\n    }\r\n}\r\n\r\nexport const updateProfilePhoto = (file: File): ThunkType => async (dispatch) => {\r\n    const data = await profileAPI.updateProfilePhoto(file)\r\n    if (data.resultCode === 0) {\r\n        dispatch(updatePhotoAC(data.data.photos))\r\n    }\r\n}\r\n\r\nexport const updateProfile = (profile: ProfileType): ThunkAction<Promise<any>, StateType, unknown, ActionsType> => async (dispatch, getState) => {\r\n    let userId = getState().profilePage.profile?.userId\r\n    const data = await profileAPI.updateProfile(profile)\r\n    if (data.resultCode === 0) {\r\n        if (userId) {\r\n            dispatch(getUserProfile(userId.toString()))\r\n        }\r\n    } else {\r\n        dispatch(stopSubmit('edit-profile', {_error: data.messages[0]}))\r\n        return Promise.reject(data.messages[0])\r\n    }\r\n}","export const required = (value:string) => value ? undefined : 'Required field'\r\n\r\nexport const maxLength = (max:number) => (value:string) =>\r\n    value && value.length > max ? `Must be ${max} characters or less` : undefined\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"Link_link__3bXki\",\"activeLink\":\"Link_activeLink__2npe1\"};"],"sourceRoot":""}